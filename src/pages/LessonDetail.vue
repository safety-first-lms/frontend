<template>
  <div class="mb-40">
    <div class="flex items-center">
      <p class="text-xl font-medium opacity-30	text-charcoal">Курсы</p>
      <svg class="mx-4" width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path opacity="0.3" d="M1 10.5L4.79289 6.70711C5.18342 6.31658 5.18342 5.68342 4.79289 5.29289L1 1.5" stroke="#1D1D1D" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <p class="text-xl font-medium text-charcoal">{{ lesson?.lesson?.title}}</p>
    </div>
    <iframe class="mt-6" width="100%" height="700px" :src="lesson?.lesson?.videoLink"></iframe>
    <div class="card w-full rounded-[10px] p-[20px] bg-[#F5F5F5]">
      <h3 class="text-[#1D1D1D] text-4xl font-medium">{{ lesson?.lesson?.title}}</h3>
      <p class="text-[#1D1D1D] text-base mt-5 opacity-60">{{ lesson?.lesson?.content}}</p>
      <div class="flex items-center mt-4">
        <img class="mr-2 rounded-full w-[50px] h-[50px]" src="/images/ellipse.png"/>
        <div class="flex flex-col">
          <p class="text-lg text-[#1D1D1D]">Общая безопасность</p>
          <p class="text-[#B3B3B3]">{{ lesson?.lesson?.course?.count }}</p>
        </div>
      </div>
      <div class="flex flex-col mt-4">
        <div class="flex">
          <svg class="mr-4" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.06 3.75C2.44735 3.75 1.85979 3.99337 1.42658 4.42658C0.993374 4.85979 0.75 5.44735 0.75 6.06V19.5112C0.75 20.0775 0.8775 20.6933 1.128 21.2213C1.14201 21.2669 1.16034 21.3111 1.18275 21.3533C1.50466 21.9591 1.99356 22.46 2.59149 22.7964C3.18942 23.1329 3.87129 23.2908 4.55625 23.2515H18.0015C18.4873 23.2492 18.9596 23.0914 19.3492 22.8012C19.7388 22.511 20.0253 22.1038 20.1667 21.639L23.1345 12.774L23.1383 12.762C23.2465 12.4207 23.274 12.0589 23.2186 11.7052C23.1633 11.3514 23.0266 11.0154 22.8194 10.7234C22.6121 10.4314 22.3399 10.1916 22.0242 10.0227C21.7085 9.85375 21.3579 9.76042 21 9.75V9C21 7.72425 20.0257 6.75 18.75 6.75H12.6248C12.4111 6.74793 12.2068 6.66233 12.0555 6.5115L10.2195 4.6425L10.2135 4.63575C9.6429 4.06838 8.87092 3.74994 8.06625 3.75H3.06ZM19.5 9.75H8.1645C7.44132 9.75019 6.73586 9.9738 6.14462 10.3902C5.55338 10.8067 5.10524 11.3956 4.8615 12.0765L4.85925 12.0825C3.465 16.0793 2.68725 18.2048 2.25 19.326V6.06C2.25 5.613 2.613 5.25 3.06 5.25H8.06625C8.47324 5.25005 8.86376 5.41068 9.153 5.697L10.989 7.566L10.9958 7.57275C11.4282 8.00443 12.0137 8.24784 12.6248 8.25H18.75C19.197 8.25 19.5 8.553 19.5 9V9.75ZM3.33375 21.4928C3.22094 21.4298 3.11423 21.3565 3.015 21.2738L3.0465 21.228C3.08175 21.1733 3.11475 21.114 3.1455 21.0555C3.207 20.9355 3.282 20.7705 3.378 20.5425C3.75825 19.635 4.55475 17.5102 6.2745 12.579C6.41459 12.19 6.67124 11.8536 7.00946 11.6158C7.34769 11.378 7.75103 11.2502 8.1645 11.25H20.9333C21.0606 11.2504 21.1861 11.2806 21.2996 11.3381C21.4132 11.3957 21.5117 11.4791 21.5872 11.5816C21.6628 11.6842 21.7132 11.8029 21.7346 11.9285C21.756 12.054 21.7476 12.1828 21.7103 12.3045L18.7402 21.174C18.7389 21.1782 18.7377 21.1825 18.7365 21.1868L18.7335 21.198C18.686 21.3571 18.5886 21.4968 18.4557 21.5964C18.3229 21.6961 18.1616 21.7504 17.9955 21.7515H4.53375C4.518 21.7515 4.5015 21.7515 4.485 21.753C4.0842 21.7788 3.68447 21.6885 3.33375 21.4928Z" fill="#B3B3B3"/>
            <path d="M6.75 11.25H22.125L18.75 21.75H2.25L6.75 11.25Z" fill="#B3B3B3"/>
          </svg>
          Образы землетрясения
        </div>
        <div class="flex mt-2">
          <svg class="mr-4" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.06 3.75C2.44735 3.75 1.85979 3.99337 1.42658 4.42658C0.993374 4.85979 0.75 5.44735 0.75 6.06V19.5112C0.75 20.0775 0.8775 20.6933 1.128 21.2213C1.14201 21.2669 1.16034 21.3111 1.18275 21.3533C1.50466 21.9591 1.99356 22.46 2.59149 22.7964C3.18942 23.1329 3.87129 23.2908 4.55625 23.2515H18.0015C18.4873 23.2492 18.9596 23.0914 19.3492 22.8012C19.7388 22.511 20.0253 22.1038 20.1667 21.639L23.1345 12.774L23.1383 12.762C23.2465 12.4207 23.274 12.0589 23.2186 11.7052C23.1633 11.3514 23.0266 11.0154 22.8194 10.7234C22.6121 10.4314 22.3399 10.1916 22.0242 10.0227C21.7085 9.85375 21.3579 9.76042 21 9.75V9C21 7.72425 20.0257 6.75 18.75 6.75H12.6248C12.4111 6.74793 12.2068 6.66233 12.0555 6.5115L10.2195 4.6425L10.2135 4.63575C9.6429 4.06838 8.87092 3.74994 8.06625 3.75H3.06ZM19.5 9.75H8.1645C7.44132 9.75019 6.73586 9.9738 6.14462 10.3902C5.55338 10.8067 5.10524 11.3956 4.8615 12.0765L4.85925 12.0825C3.465 16.0793 2.68725 18.2048 2.25 19.326V6.06C2.25 5.613 2.613 5.25 3.06 5.25H8.06625C8.47324 5.25005 8.86376 5.41068 9.153 5.697L10.989 7.566L10.9958 7.57275C11.4282 8.00443 12.0137 8.24784 12.6248 8.25H18.75C19.197 8.25 19.5 8.553 19.5 9V9.75ZM3.33375 21.4928C3.22094 21.4298 3.11423 21.3565 3.015 21.2738L3.0465 21.228C3.08175 21.1733 3.11475 21.114 3.1455 21.0555C3.207 20.9355 3.282 20.7705 3.378 20.5425C3.75825 19.635 4.55475 17.5102 6.2745 12.579C6.41459 12.19 6.67124 11.8536 7.00946 11.6158C7.34769 11.378 7.75103 11.2502 8.1645 11.25H20.9333C21.0606 11.2504 21.1861 11.2806 21.2996 11.3381C21.4132 11.3957 21.5117 11.4791 21.5872 11.5816C21.6628 11.6842 21.7132 11.8029 21.7346 11.9285C21.756 12.054 21.7476 12.1828 21.7103 12.3045L18.7402 21.174C18.7389 21.1782 18.7377 21.1825 18.7365 21.1868L18.7335 21.198C18.686 21.3571 18.5886 21.4968 18.4557 21.5964C18.3229 21.6961 18.1616 21.7504 17.9955 21.7515H4.53375C4.518 21.7515 4.5015 21.7515 4.485 21.753C4.0842 21.7788 3.68447 21.6885 3.33375 21.4928Z" fill="#B3B3B3"/>
            <path d="M6.75 11.25H22.125L18.75 21.75H2.25L6.75 11.25Z" fill="#B3B3B3"/>
          </svg>
          Инструкция по безопасности
        </div>
      </div>
      <p class="text-[#1D1D1D] mt-[18px] text-lg opacity-30">Автор: {{ lesson?.lesson?.course?.createdBy }}</p>
    </div>
    <div class="mt-8 h-[342px] card w-full rounded-[10px] px-6 py-[30px] bg-[#F5F5F5]">
      <img src="/images/test.png" class="h-[300px]"/>
    </div>
    <div class="mt-8 card w-full rounded-[10px] px-6 py-[30px] bg-[#F5F5F5]">
      <h3 class="text-[#1D1D1D] text-2xl font-medium">Нужна помощь или есть вопросы?</h3>
      <p class="mt-4 text-base text-[#1D1D1D] opacity-60">Куратор курса всегда готов ответить</p>
      <button class="mt-4 rounded-[10px] px-4 h-[43px] bg-[#00B14E] text-white flex justify-center items-center">Связаться с Куратором</button>
    </div>
  </div>
</template>
<style lang="scss" scoped>
.card{
  border: 1px solid rgba(0, 0, 0, 0.05);
}
</style>
<script lang="ts" setup>
import { ref, onMounted } from 'vue';
import { useRoute } from 'vue-router';
import { useCookies } from '@vueuse/integrations/useCookies';

const route = useRoute();
const { get } = useCookies();
const lesson = ref();

onMounted(async () => {
  const response = await fetch(`http://167.71.61.120:3000/lessons/${route.params.id}`, {
    method: 'GET',
    headers: {
      'Content-Type': 'application/json',
      Authorization: `Bearer ${get('access_token')}`
    }
  });
  lesson.value = await response.json();
  console.log(lesson.value);
});
</script>
